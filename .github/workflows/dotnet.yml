name: .NET 9 CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: 📥 Checkout code
      uses: actions/checkout@v3

    - name: 🧰 Install .NET 9 SDK (latest version manually)
      run: |
        curl -SL https://dotnet.microsoft.com/en-us/download/dotnet/scripts/v1/dotnet-install.sh -o dotnet-install.sh
        chmod +x dotnet-install.sh
        ./dotnet-install.sh --channel 9.0
        echo "$HOME/.dotnet" >> $GITHUB_PATH
        echo "DOTNET_ROOT=$HOME/.dotnet" >> $GITHUB_ENV

    - name: 🛠️ Restore dependencies
      run: dotnet restore

    - name: 🧪 Build project
      run: dotnet build --no-restore --configuration Release
